---
title: 构造趣题几道
date: 2024-04-24 16:09:02
tags:
---

> 对于一个 $n\times n$ 的矩阵，$[1,n\times n]$ 在其中各出现一次。
>
> 定义一条好路径为一个坐标序列 $(x_1,y_1),(x_2,y_2),...,(x_k,y_k)$ 满足 $(x_1,y_1)$ 是「山谷」并且 $(x_i,y_i)$ 与 $(x_{i+1},y_{i+1})$ 相邻，且坐标上的数字单调增。
>
> 「山谷」表示这个点的数字比与他相邻的点都小，相邻是四联通。
>
> 对于所有满足条件的矩阵，求好路径最小值，并构造方案。
>
> 来源：IMO 2023 T6

<!--more-->

还是蛮有趣的。

小的向大的连边，dag 的路径计数，随便构造大概都是指数级的，肯定要尽量构造成树，这样路径比较唯一。

首先起点只有一个肯定优，不然隔开两个点能到范围的部分会计算多次，那么这个起点肯定可以到达所有点，不然就会有多个起点，因此答案是 $\mathcal O(n^2)$ 级别的。

由于路径中间出现环很容易乘起来到达指数级，所以考虑只在树的叶子处形成环，也就是我们选定若干点作为终点，把终点去掉之后，剩下的点形成一棵树。

还需要满足的条件是终点不能相邻。

考虑一下这样构造的答案，注意到总点数已知，总边数已知，去掉这些点只要满足剩下的点联通并且点边数满足条件就一定是树，而一个终点对答案增加的贡献与对点边数产生的贡献是相同的，所有合法方案的答案是相同的，计算后可以得到是 $2n^2-2n+1$ 。

然后考虑构造，由于终点不能联通，又要把其他点隔开，所以剩余点可以构造为若干条横着的「鱼骨」，然后左边串联起来即可。

```
0111111
1101010
1010101
1111111
1010101
1101010
0111111
```